app-id: com.github.rajsolai.textsnatcher

runtime: org.gnome.Platform
runtime-version: "41"
base: io.elementary.BaseApp
base-version: "juno-21.08"
sdk: org.gnome.Sdk
command: com.github.rajsolai.textsnatcher

finish-args:
  - "--share=ipc"
  - "--socket=fallback-x11"
  - "--socket=wayland"
  - "--device=dri"
  - "--filesystem=xdg-pictures"
  - "--talk-name=org.gnome.Shell.Screenshot"
  - "--system-talk-name=org.freedesktop.Accounts"

modules:
  - name: com.github.rajsolai.textsnatcher
    buildsystem: meson
    sources:
      - type: archive
        url: https://github.com/RajSolai/TextSnatcher/archive/refs/tags/v1.0.0.tar.gz
        sha256: 24e1a820401d19515d31d780327e0ace7415f2c05f5902902d4ae6cd9e0b5b79

  - name: leptonica
    rm-configure: true
    config-opts:
      - --disable-static
    sources:
      - type: archive
        url: https://github.com/DanBloomberg/leptonica/releases/download/1.79.0/leptonica-1.79.0.tar.gz
        sha256: 045966c9c5d60ebded314a9931007a56d9d2f7a6ac39cb5cc077c816f62300d8

  - name: tesseract
    config-opts:
      - --disable-static
      - --disable-graphics
      - --enable-legacy
    sources:
      - type: archive
        url: https://github.com/tesseract-ocr/tesseract/archive/4.1.1.tar.gz
        sha256: 2a66ff0d8595bff8f04032165e6c936389b1e5727c3ce5a27b3e059d218db1cb
      - type: archive
        url: https://github.com/tesseract-ocr/tessdata_best/archive/4.0.0.tar.gz
        sha256: 5d826c8a926d06b4e19eae391949f24f3011973cc7f679c57a059054fa2d8c60
        dest: traineddata
    post-install:
      - install -p -D -m 0644 "traineddata"/tam.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/eng.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/hin.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/jpn.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/rus.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/fra.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/tha.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/ara.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/chi_sim.traineddata -t "${FLATPAK_DEST}/share/tessdata/";
      - install -p -D -m 0644 "traineddata"/spa.traineddata -t "${FLATPAK_DEST}/share/tessdata/";

